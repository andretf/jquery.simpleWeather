/*! simpleWeather v3.1.0 - http://simpleweatherjs.com */
!function(e){"use strict";function t(e,t){return"f"===e?Math.round(5/9*(t-32)):Math.round(1.8*t+32)}function i(e){var t=e.split(",");return 2===t.length&&(isNaN(parseFloat(t[0]))||isNaN(parseFloat(t[1]))||(e="("+t.join(",")+")")),e}e.extend({simpleWeather:function(o){o=e.extend({location:"",woeid:"",unit:"f",success:function(e){},error:function(e){}},o);var r=new Date,n="https://query.yahooapis.com/v1/public/yql?format=json&rnd="+r.getFullYear()+r.getMonth()+r.getDay()+r.getHours()+"&diagnostics=true&callback=?&q=";if(""!==o.location)n+='select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+i(o.location)+'") and u="'+o.unit+'"';else{if(""===o.woeid)return o.error({message:"Could not retrieve weather due to an invalid location."}),!1;n+="select * from weather.forecast where woeid="+o.woeid+' and u="'+o.unit+'"'}return e.getJSON(encodeURI(n),function(e){if(null!==e&&null!==e.query&&null!==e.query.results&&"Yahoo! Weather Error"!==e.query.results.channel.description){var i,r=e.query.results.channel,n={},s=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"],a="https://s.yimg.com/os/mit/media/m/weather/images/icons/l/44d-100567.png";n.title=r.item.title,n.temp=r.item.condition.temp,n.code=r.item.condition.code,n.todayCode=r.item.forecast[0].code,n.currently=r.item.condition.text,n.high=r.item.forecast[0].high,n.low=r.item.forecast[0].low,n.text=r.item.forecast[0].text,n.humidity=r.atmosphere.humidity,n.pressure=r.atmosphere.pressure,n.rising=r.atmosphere.rising,n.visibility=r.atmosphere.visibility,n.sunrise=r.astronomy.sunrise,n.sunset=r.astronomy.sunset,n.description=r.item.description,n.city=r.location.city,n.country=r.location.country,n.region=r.location.region,n.updated=r.item.pubDate,n.link=r.item.link,n.units={temp:r.units.temperature,distance:r.units.distance,pressure:r.units.pressure,speed:r.units.speed},n.wind={chill:r.wind.chill,direction:s[Math.round(r.wind.direction/22.5)],speed:r.wind.speed},r.item.condition.temp<80&&r.atmosphere.humidity<40?n.heatindex=-42.379+2.04901523*r.item.condition.temp+10.14333127*r.atmosphere.humidity-.22475541*r.item.condition.temp*r.atmosphere.humidity-6.83783*Math.pow(10,-3)*Math.pow(r.item.condition.temp,2)-5.481717*Math.pow(10,-2)*Math.pow(r.atmosphere.humidity,2)+1.22874*Math.pow(10,-3)*Math.pow(r.item.condition.temp,2)*r.atmosphere.humidity+8.5282*Math.pow(10,-4)*r.item.condition.temp*Math.pow(r.atmosphere.humidity,2)-1.99*Math.pow(10,-6)*Math.pow(r.item.condition.temp,2)*Math.pow(r.atmosphere.humidity,2):n.heatindex=r.item.condition.temp,"3200"==r.item.condition.code?(n.thumbnail=a,n.image=a):(n.thumbnail="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+r.item.condition.code+"ds.png",n.image="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+r.item.condition.code+"d.png"),n.alt={temp:t(o.unit,r.item.condition.temp),high:t(o.unit,r.item.forecast[0].high),low:t(o.unit,r.item.forecast[0].low)},"f"===o.unit?n.alt.unit="c":n.alt.unit="f",n.forecast=[];for(var m=0;m<r.item.forecast.length;m++)i=r.item.forecast[m],i.alt={high:t(o.unit,r.item.forecast[m].high),low:t(o.unit,r.item.forecast[m].low)},"3200"==r.item.forecast[m].code?(i.thumbnail=a,i.image=a):(i.thumbnail="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+r.item.forecast[m].code+"ds.png",i.image="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+r.item.forecast[m].code+"d.png"),n.forecast.push(i);o.success(n)}else null!==e&&null!==e.query&&0===e.query.count?o.error({message:"Sorry, your location has no weather information. Please try again.",error:"Location not found."}):null!==e&&null!==e.query&&null!==e.query.results&&null!==e.query.results.channel&&null!==e.query.results.channel.title?o.error({message:"There was an error retrieving the latest weather information. Please try again.",error:e.query.results.channel.item.title}):o.error({message:"There was an error retrieving the latest weather information. Please try again.",error:"Unspecified error."})}),this}})}(jQuery);
